<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>

body{
margin:0;
font-family:Arial, sans-serif;
background:linear-gradient(135deg,#87CEEB,#ffffff);
}

.container{
max-width:520px;
margin:20px auto;
background:white;
padding:25px;
border-radius:15px;
box-shadow:0 8px 20px rgba(0,0,0,0.15);
}

h2{
text-align:center;
color:#0b5ed7;
margin-bottom:10px;
}

.section-title{
margin-top:15px;
font-weight:bold;
color:#0b5ed7;
}

input,select{
width:100%;
padding:12px;
margin:6px 0;
border-radius:8px;
border:1px solid #ccc;
font-size:15px;
}

button{
width:100%;
padding:12px;
margin-top:10px;
background:#0b5ed7;
color:white;
border:none;
border-radius:8px;
font-size:16px;
cursor:pointer;
}

button:hover{
background:#084298;
}

.item-row{
display:flex;
justify-content:space-between;
padding:8px 0;
border-bottom:1px solid #eee;
font-size:14px;
}

.total-box{
background:#e7f1ff;
padding:12px;
border-radius:8px;
text-align:center;
margin-top:10px;
font-size:18px;
font-weight:bold;
color:#0b5ed7;
}

.footer{
text-align:center;
font-size:12px;
margin-top:15px;
color:#555;
}

</style>
</head>

<body>

<div class="container">

<h2>ðŸ§¾ Moms Kitchen Billing</h2>

<input id="name" placeholder="Customer Name">
<input id="phone" placeholder="Phone Number">

<div class="section-title">Select Category</div>
<select id="category" onchange="loadItems()">
<option value="">Select Category</option>
<option value="food">Special Food</option>
<option value="beverages">Tea & Coffee</option>
<option value="Drinks">Drinks & Shakes</option>
<option value="Snacks">Snacks & Biscuit</option>
<option value="cigarette">Cigarettes</option>
</select>

<div class="section-title">Select Item</div>
<select id="itemName" onchange="setPrice()">
<option>Select Item</option>
</select>

<input id="qty" type="number" placeholder="Quantity">
<input id="price" type="number" placeholder="Price">

<button onclick="addItem()">+ Add Item</button>

<div id="items"></div>

<div class="total-box">
Total: â‚¹ <span id="total">0</span>
</div>

<button onclick="submitOrder()">Save Order</button>

<p id="msg" style="text-align:center;font-weight:bold;"></p>

<div class="footer">
Powered by Royal Tomar
</div>

</div>

<script>

// ================== GOOGLE WEB APP URL ==================
const API_URL = "https://script.google.com/macros/s/AKfycby5uXI8-49j94vySzDDbTPzzaITz1LXTjywBswk2EYurjV3UMdIj3tciBsU7d2_q1TkZQ/exec";
// =========================================================

// ======= YOUR SHOP ITEMS =======
const menu = {

food:[
{name:"Aloo Paties",price:20},
{name:"Sandwich",price:20},
{name:"Vada Pav",price:30},
{name:"Fatafat Bhel Chat",price:25},
{name:"Kurkure Chat",price:25},
{name:"Aloo Tikki",price:100},
{name:"Veg Double Masala Maggi",price:60}
],

beverages:[
{name:"Milk Tea",price:15},
{name:"Black Tea",price:25},
{name:"Hot Coffee",price:25},
{name:"Cold Coffee",price:50}
],

Drinks:[
{name:"Lahori Jeera",price:10},
{name:"Amul Kesar Milk",price:20},
{name:"Real Mixed Fruit",price:20},
{name:"Soft Drink 250 ML",price:20},
{name:"Diet Coke",price:25},
{name:"Coconut Water",price:50},
{name:"Lemonade Drink",price:50},
{name:"7UP Nimbooz",price:20}
],

Snacks:[
{name:"Blue Lays",price:10},
{name:"Green Lays",price:10},
{name:"Yellow Lays",price:10},
{name:"KurKure",price:10},
{name:"Fatafat Bhel",price:10},
{name:"Punjabi Tadka",price:10},
{name:"Diet Mixture",price:10},
{name:"Nut Crackers",price:10},
{name:"Gup Shup",price:10},
{name:"Salted Peanut",price:10},
{name:"Aloo Bhujia",price:10},
{name:"Besan Bhujia",price:10},
{name:"Navratan",price:10},
{name:"Nimbus Masala",price:10},
{name:"Palak Sev",price:10},
{name:"MoonDal",price:10},
{name:"Good Day",price:10},
{name:"Moms Magic",price:10},
{name:"Marry Gold",price:10},
{name:"Coconut Biscuit",price:10},
{name:"Jim Jam",price:10},
{name:"Parle-G",price:10},
{name:"Butter Delight",price:10}
],

cigarette:[
{name:"Gold Flake",price:20},
{name:"Classic",price:23},
{name:"Marlboro",price:25}
]

};

let cart = [];


// ===== LOAD ITEMS =====
function loadItems(){
const cat = document.getElementById("category").value;
const itemSelect = document.getElementById("itemName");

itemSelect.innerHTML = "<option value=''>Select Item</option>";

if(!menu[cat]) return;

menu[cat].forEach(item=>{
itemSelect.innerHTML += `<option value="${item.name}">${item.name}</option>`;
});
}


// ===== AUTO PRICE =====
function setPrice(){
const cat = document.getElementById("category").value;
const name = document.getElementById("itemName").value;

if(!menu[cat]) return;

const item = menu[cat].find(i=>i.name===name);
if(item){
document.getElementById("price").value = item.price;
}
}


// ===== ADD ITEM =====
function addItem(){

const name = document.getElementById("itemName").value;
const qty = Number(document.getElementById("qty").value);
const price = Number(document.getElementById("price").value);

if(!name || !qty || !price){
alert("Select item & quantity");
return;
}

cart.push({name,qty,price});
document.getElementById("qty").value="";
renderItems();
}


// ===== RENDER CART =====
function renderItems(){
const list = document.getElementById("items");
list.innerHTML = "";
let total = 0;

cart.forEach(item=>{
total += item.qty * item.price;

list.innerHTML += `
<div class="item-row">
<span>${item.name} (${item.qty})</span>
<span>â‚¹${item.qty * item.price}</span>
</div>`;
});

document.getElementById("total").innerText = total;
}


// ===== SAVE ORDER =====
async function submitOrder(){

const name = document.getElementById("name").value;
const phone = document.getElementById("phone").value;

if(!name || !phone || cart.length===0){
alert("Enter customer details & add items");
return;
}

const data = {
action:"saveOrder",
name:name,
phone:phone,
items:cart
};

try{
await fetch(API_URL,{
method:"POST",
body:JSON.stringify(data)
});

alert("Order Saved Successfully!");

cart=[];
renderItems();
document.getElementById("name").value="";
document.getElementById("phone").value="";

}catch(err){
alert("Error saving order");
console.log(err);
}

}


// ===== TODAY TOTAL =====
async function showTodayTotal(){

const res = await fetch(API_URL,{
method:"POST",
body:JSON.stringify({action:"todayTotal"})
});

const data = await res.json();
alert("Today's Total: â‚¹ " + data.total);

}

</script>


</body>
</html>
